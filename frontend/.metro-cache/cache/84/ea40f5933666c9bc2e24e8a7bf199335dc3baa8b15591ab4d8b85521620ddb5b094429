{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":26,"index":175}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _axios = require(_dependencyMap[2], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const API_URL = process.env.EXPO_PUBLIC_BACKEND_URL;\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      checkAuth();\n    }, []);\n    const checkAuth = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('token');\n        if (storedToken) {\n          setToken(storedToken);\n          const response = await axios.default.get(`${API_URL}/api/auth/me`, {\n            headers: {\n              Authorization: `Bearer ${storedToken}`\n            }\n          });\n          setUser(response.data);\n        }\n      } catch (error) {\n        console.error('Auth check failed:', error);\n        await AsyncStorage.default.removeItem('token');\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      try {\n        const response = await axios.default.post(`${API_URL}/api/auth/login`, {\n          email,\n          password\n        });\n        const {\n          token: newToken,\n          user: userData\n        } = response.data;\n        setToken(newToken);\n        setUser(userData);\n        await AsyncStorage.default.setItem('token', newToken);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    };\n    const register = async (username, email, password) => {\n      try {\n        console.log('AuthContext: Sending registration request...');\n        const response = await axios.default.post(`${API_URL}/api/auth/register`, {\n          username,\n          email,\n          password\n        });\n        console.log('AuthContext: Registration response received:', response.data);\n        const {\n          token: newToken,\n          user: userData\n        } = response.data;\n        setToken(newToken);\n        setUser(userData);\n        await AsyncStorage.default.setItem('token', newToken);\n        console.log('AuthContext: Token saved, user set:', userData);\n      } catch (error) {\n        console.error('AuthContext: Registration error:', error.response?.data || error.message);\n        throw new Error(error.response?.data?.detail || 'Registration failed');\n      }\n    };\n    const logout = async () => {\n      setUser(null);\n      setToken(null);\n      await AsyncStorage.default.removeItem('token');\n    };\n    const updateUser = userData => {\n      if (user) {\n        setUser({\n          ...user,\n          ...userData\n        });\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        login,\n        register,\n        logout,\n        updateUser,\n        loading\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 5\n    }, this);\n  };\n  const useAuth = () => {\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n  };\n});","lineCount":137,"map":[[13,2,28,0,"Object"],[13,8,28,0],[13,9,28,0,"defineProperty"],[13,23,28,0],[13,24,28,0,"exports"],[13,31,28,0],[14,4,28,0,"enumerable"],[14,14,28,0],[15,4,28,0,"get"],[15,7,28,0],[15,18,28,0,"get"],[15,19,28,0],[16,6,28,0],[16,13,28,0,"AuthProvider"],[16,25,28,0],[17,4,28,0],[18,2,28,0],[19,2,109,0,"Object"],[19,8,109,0],[19,9,109,0,"defineProperty"],[19,23,109,0],[19,24,109,0,"exports"],[19,31,109,0],[20,4,109,0,"enumerable"],[20,14,109,0],[21,4,109,0,"get"],[21,7,109,0],[21,18,109,0,"get"],[21,19,109,0],[22,6,109,0],[22,13,109,0,"useAuth"],[22,20,109,0],[23,4,109,0],[24,2,109,0],[25,2,1,0],[25,6,1,0,"_react"],[25,12,1,0],[25,15,1,0,"require"],[25,22,1,0],[25,23,1,0,"_dependencyMap"],[25,37,1,0],[26,2,2,0],[26,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[26,42,2,0],[26,45,2,0,"require"],[26,52,2,0],[26,53,2,0,"_dependencyMap"],[26,67,2,0],[27,2,2,0],[27,6,2,0,"AsyncStorage"],[27,18,2,0],[27,21,2,0,"_interopDefault"],[27,36,2,0],[27,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[27,73,2,0],[28,2,3,0],[28,6,3,0,"_axios"],[28,12,3,0],[28,15,3,0,"require"],[28,22,3,0],[28,23,3,0,"_dependencyMap"],[28,37,3,0],[29,2,3,0],[29,6,3,0,"axios"],[29,11,3,0],[29,14,3,0,"_interopDefault"],[29,29,3,0],[29,30,3,0,"_axios"],[29,36,3,0],[30,2,3,26],[30,6,3,26,"_reactJsxDevRuntime"],[30,25,3,26],[30,28,3,26,"require"],[30,35,3,26],[30,36,3,26,"_dependencyMap"],[30,50,3,26],[31,2,5,0],[31,8,5,6,"API_URL"],[31,15,5,13],[31,18,5,16,"process"],[31,25,5,23],[31,26,5,24,"env"],[31,29,5,27],[31,30,5,28,"EXPO_PUBLIC_BACKEND_URL"],[31,53,5,51],[32,2,26,0],[32,8,26,6,"AuthContext"],[32,19,26,17],[32,35,26,20],[32,39,26,20,"createContext"],[32,45,26,33],[32,46,26,33,"createContext"],[32,59,26,33],[32,61,26,63,"undefined"],[32,70,26,72],[32,71,26,73],[33,2,28,7],[33,8,28,13,"AuthProvider"],[33,20,28,66],[33,23,28,69,"AuthProvider"],[33,24,28,70],[34,4,28,72,"children"],[35,2,28,81],[35,3,28,82],[35,8,28,87],[36,4,29,2],[36,10,29,8],[36,11,29,9,"user"],[36,15,29,13],[36,17,29,15,"setUser"],[36,24,29,22],[36,25,29,23],[36,28,29,26],[36,32,29,26,"useState"],[36,38,29,34],[36,39,29,34,"useState"],[36,47,29,34],[36,49,29,48],[36,53,29,52],[36,54,29,53],[37,4,30,2],[37,10,30,8],[37,11,30,9,"token"],[37,16,30,14],[37,18,30,16,"setToken"],[37,26,30,24],[37,27,30,25],[37,30,30,28],[37,34,30,28,"useState"],[37,40,30,36],[37,41,30,36,"useState"],[37,49,30,36],[37,51,30,52],[37,55,30,56],[37,56,30,57],[38,4,31,2],[38,10,31,8],[38,11,31,9,"loading"],[38,18,31,16],[38,20,31,18,"setLoading"],[38,30,31,28],[38,31,31,29],[38,34,31,32],[38,38,31,32,"useState"],[38,44,31,40],[38,45,31,40,"useState"],[38,53,31,40],[38,55,31,41],[38,59,31,45],[38,60,31,46],[39,4,33,2],[39,8,33,2,"useEffect"],[39,14,33,11],[39,15,33,11,"useEffect"],[39,24,33,11],[39,26,33,12],[39,32,33,18],[40,6,34,4,"checkAuth"],[40,15,34,13],[40,16,34,14],[40,17,34,15],[41,4,35,2],[41,5,35,3],[41,7,35,5],[41,9,35,7],[41,10,35,8],[42,4,37,2],[42,10,37,8,"checkAuth"],[42,19,37,17],[42,22,37,20],[42,28,37,20,"checkAuth"],[42,29,37,20],[42,34,37,32],[43,6,38,4],[43,10,38,8],[44,8,39,6],[44,14,39,12,"storedToken"],[44,25,39,23],[44,28,39,26],[44,34,39,32,"AsyncStorage"],[44,46,39,44],[44,47,39,44,"default"],[44,54,39,44],[44,55,39,45,"getItem"],[44,62,39,52],[44,63,39,53],[44,70,39,60],[44,71,39,61],[45,8,40,6],[45,12,40,10,"storedToken"],[45,23,40,21],[45,25,40,23],[46,10,41,8,"setToken"],[46,18,41,16],[46,19,41,17,"storedToken"],[46,30,41,28],[46,31,41,29],[47,10,42,8],[47,16,42,14,"response"],[47,24,42,22],[47,27,42,25],[47,33,42,31,"axios"],[47,38,42,36],[47,39,42,36,"default"],[47,46,42,36],[47,47,42,37,"get"],[47,50,42,40],[47,51,42,41],[47,54,42,44,"API_URL"],[47,61,42,51],[47,75,42,65],[47,77,42,67],[48,12,43,10,"headers"],[48,19,43,17],[48,21,43,19],[49,14,43,21,"Authorization"],[49,27,43,34],[49,29,43,36],[49,39,43,46,"storedToken"],[49,50,43,57],[50,12,43,60],[51,10,44,8],[51,11,44,9],[51,12,44,10],[52,10,45,8,"setUser"],[52,17,45,15],[52,18,45,16,"response"],[52,26,45,24],[52,27,45,25,"data"],[52,31,45,29],[52,32,45,30],[53,8,46,6],[54,6,47,4],[54,7,47,5],[54,8,47,6],[54,15,47,13,"error"],[54,20,47,18],[54,22,47,20],[55,8,48,6,"console"],[55,15,48,13],[55,16,48,14,"error"],[55,21,48,19],[55,22,48,20],[55,42,48,40],[55,44,48,42,"error"],[55,49,48,47],[55,50,48,48],[56,8,49,6],[56,14,49,12,"AsyncStorage"],[56,26,49,24],[56,27,49,24,"default"],[56,34,49,24],[56,35,49,25,"removeItem"],[56,45,49,35],[56,46,49,36],[56,53,49,43],[56,54,49,44],[57,6,50,4],[57,7,50,5],[57,16,50,14],[58,8,51,6,"setLoading"],[58,18,51,16],[58,19,51,17],[58,24,51,22],[58,25,51,23],[59,6,52,4],[60,4,53,2],[60,5,53,3],[61,4,55,2],[61,10,55,8,"login"],[61,15,55,13],[61,18,55,16],[61,24,55,16,"login"],[61,25,55,23,"email"],[61,30,55,36],[61,32,55,38,"password"],[61,40,55,54],[61,45,55,59],[62,6,56,4],[62,10,56,8],[63,8,57,6],[63,14,57,12,"response"],[63,22,57,20],[63,25,57,23],[63,31,57,29,"axios"],[63,36,57,34],[63,37,57,34,"default"],[63,44,57,34],[63,45,57,35,"post"],[63,49,57,39],[63,50,57,40],[63,53,57,43,"API_URL"],[63,60,57,50],[63,77,57,67],[63,79,57,69],[64,10,58,8,"email"],[64,15,58,13],[65,10,59,8,"password"],[66,8,60,6],[66,9,60,7],[66,10,60,8],[67,8,61,6],[67,14,61,12],[68,10,61,14,"token"],[68,15,61,19],[68,17,61,21,"newToken"],[68,25,61,29],[69,10,61,31,"user"],[69,14,61,35],[69,16,61,37,"userData"],[70,8,61,46],[70,9,61,47],[70,12,61,50,"response"],[70,20,61,58],[70,21,61,59,"data"],[70,25,61,63],[71,8,62,6,"setToken"],[71,16,62,14],[71,17,62,15,"newToken"],[71,25,62,23],[71,26,62,24],[72,8,63,6,"setUser"],[72,15,63,13],[72,16,63,14,"userData"],[72,24,63,22],[72,25,63,23],[73,8,64,6],[73,14,64,12,"AsyncStorage"],[73,26,64,24],[73,27,64,24,"default"],[73,34,64,24],[73,35,64,25,"setItem"],[73,42,64,32],[73,43,64,33],[73,50,64,40],[73,52,64,42,"newToken"],[73,60,64,50],[73,61,64,51],[74,6,65,4],[74,7,65,5],[74,8,65,6],[74,15,65,13,"error"],[74,20,65,23],[74,22,65,25],[75,8,66,6],[75,14,66,12],[75,18,66,16,"Error"],[75,23,66,21],[75,24,66,22,"error"],[75,29,66,27],[75,30,66,28,"response"],[75,38,66,36],[75,40,66,38,"data"],[75,44,66,42],[75,46,66,44,"detail"],[75,52,66,50],[75,56,66,54],[75,70,66,68],[75,71,66,69],[76,6,67,4],[77,4,68,2],[77,5,68,3],[78,4,70,2],[78,10,70,8,"register"],[78,18,70,16],[78,21,70,19],[78,27,70,19,"register"],[78,28,70,26,"username"],[78,36,70,42],[78,38,70,44,"email"],[78,43,70,57],[78,45,70,59,"password"],[78,53,70,75],[78,58,70,80],[79,6,71,4],[79,10,71,8],[80,8,72,6,"console"],[80,15,72,13],[80,16,72,14,"log"],[80,19,72,17],[80,20,72,18],[80,66,72,64],[80,67,72,65],[81,8,73,6],[81,14,73,12,"response"],[81,22,73,20],[81,25,73,23],[81,31,73,29,"axios"],[81,36,73,34],[81,37,73,34,"default"],[81,44,73,34],[81,45,73,35,"post"],[81,49,73,39],[81,50,73,40],[81,53,73,43,"API_URL"],[81,60,73,50],[81,80,73,70],[81,82,73,72],[82,10,74,8,"username"],[82,18,74,16],[83,10,75,8,"email"],[83,15,75,13],[84,10,76,8,"password"],[85,8,77,6],[85,9,77,7],[85,10,77,8],[86,8,78,6,"console"],[86,15,78,13],[86,16,78,14,"log"],[86,19,78,17],[86,20,78,18],[86,66,78,64],[86,68,78,66,"response"],[86,76,78,74],[86,77,78,75,"data"],[86,81,78,79],[86,82,78,80],[87,8,79,6],[87,14,79,12],[88,10,79,14,"token"],[88,15,79,19],[88,17,79,21,"newToken"],[88,25,79,29],[89,10,79,31,"user"],[89,14,79,35],[89,16,79,37,"userData"],[90,8,79,46],[90,9,79,47],[90,12,79,50,"response"],[90,20,79,58],[90,21,79,59,"data"],[90,25,79,63],[91,8,80,6,"setToken"],[91,16,80,14],[91,17,80,15,"newToken"],[91,25,80,23],[91,26,80,24],[92,8,81,6,"setUser"],[92,15,81,13],[92,16,81,14,"userData"],[92,24,81,22],[92,25,81,23],[93,8,82,6],[93,14,82,12,"AsyncStorage"],[93,26,82,24],[93,27,82,24,"default"],[93,34,82,24],[93,35,82,25,"setItem"],[93,42,82,32],[93,43,82,33],[93,50,82,40],[93,52,82,42,"newToken"],[93,60,82,50],[93,61,82,51],[94,8,83,6,"console"],[94,15,83,13],[94,16,83,14,"log"],[94,19,83,17],[94,20,83,18],[94,57,83,55],[94,59,83,57,"userData"],[94,67,83,65],[94,68,83,66],[95,6,84,4],[95,7,84,5],[95,8,84,6],[95,15,84,13,"error"],[95,20,84,23],[95,22,84,25],[96,8,85,6,"console"],[96,15,85,13],[96,16,85,14,"error"],[96,21,85,19],[96,22,85,20],[96,56,85,54],[96,58,85,56,"error"],[96,63,85,61],[96,64,85,62,"response"],[96,72,85,70],[96,74,85,72,"data"],[96,78,85,76],[96,82,85,80,"error"],[96,87,85,85],[96,88,85,86,"message"],[96,95,85,93],[96,96,85,94],[97,8,86,6],[97,14,86,12],[97,18,86,16,"Error"],[97,23,86,21],[97,24,86,22,"error"],[97,29,86,27],[97,30,86,28,"response"],[97,38,86,36],[97,40,86,38,"data"],[97,44,86,42],[97,46,86,44,"detail"],[97,52,86,50],[97,56,86,54],[97,77,86,75],[97,78,86,76],[98,6,87,4],[99,4,88,2],[99,5,88,3],[100,4,90,2],[100,10,90,8,"logout"],[100,16,90,14],[100,19,90,17],[100,25,90,17,"logout"],[100,26,90,17],[100,31,90,29],[101,6,91,4,"setUser"],[101,13,91,11],[101,14,91,12],[101,18,91,16],[101,19,91,17],[102,6,92,4,"setToken"],[102,14,92,12],[102,15,92,13],[102,19,92,17],[102,20,92,18],[103,6,93,4],[103,12,93,10,"AsyncStorage"],[103,24,93,22],[103,25,93,22,"default"],[103,32,93,22],[103,33,93,23,"removeItem"],[103,43,93,33],[103,44,93,34],[103,51,93,41],[103,52,93,42],[104,4,94,2],[104,5,94,3],[105,4,96,2],[105,10,96,8,"updateUser"],[105,20,96,18],[105,23,96,22,"userData"],[105,31,96,45],[105,35,96,50],[106,6,97,4],[106,10,97,8,"user"],[106,14,97,12],[106,16,97,14],[107,8,98,6,"setUser"],[107,15,98,13],[107,16,98,14],[108,10,98,16],[108,13,98,19,"user"],[108,17,98,23],[109,10,98,25],[109,13,98,28,"userData"],[110,8,98,37],[110,9,98,38],[110,10,98,39],[111,6,99,4],[112,4,100,2],[112,5,100,3],[113,4,102,2],[113,24,103,4],[113,28,103,4,"_reactJsxDevRuntime"],[113,47,103,4],[113,48,103,4,"jsxDEV"],[113,54,103,4],[113,56,103,5,"AuthContext"],[113,67,103,16],[113,68,103,17,"Provider"],[113,76,103,25],[114,6,103,26,"value"],[114,11,103,31],[114,13,103,33],[115,8,103,35,"user"],[115,12,103,39],[116,8,103,41,"token"],[116,13,103,46],[117,8,103,48,"login"],[117,13,103,53],[118,8,103,55,"register"],[118,16,103,63],[119,8,103,65,"logout"],[119,14,103,71],[120,8,103,73,"updateUser"],[120,18,103,83],[121,8,103,85,"loading"],[122,6,103,93],[122,7,103,95],[123,6,103,95,"children"],[123,14,103,95],[123,16,104,7,"children"],[124,4,104,15],[125,6,104,15,"fileName"],[125,14,104,15],[125,16,104,15,"_jsxFileName"],[125,28,104,15],[126,6,104,15,"lineNumber"],[126,16,104,15],[127,6,104,15,"columnNumber"],[127,18,104,15],[128,4,104,15],[128,11,105,26],[128,12,105,27],[129,2,107,0],[129,3,107,1],[130,2,109,7],[130,8,109,13,"useAuth"],[130,15,109,20],[130,18,109,23,"useAuth"],[130,19,109,23],[130,24,109,29],[131,4,110,2],[131,10,110,8,"context"],[131,17,110,15],[131,20,110,18],[131,24,110,18,"useContext"],[131,30,110,28],[131,31,110,28,"useContext"],[131,41,110,28],[131,43,110,29,"AuthContext"],[131,54,110,40],[131,55,110,41],[132,4,111,2],[132,8,111,6],[132,9,111,7,"context"],[132,16,111,14],[132,18,111,16],[133,6,112,4],[133,12,112,10],[133,16,112,14,"Error"],[133,21,112,19],[133,22,112,20],[133,64,112,62],[133,65,112,63],[134,4,113,2],[135,4,114,2],[135,11,114,9,"context"],[135,18,114,16],[136,2,115,0],[136,3,115,1],[137,0,115,2],[137,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","checkAuth","login","register","logout","updateUser","useAuth"],"mappings":"AAA;qEC2B;YCK;GDE;oBEE;GFgB;gBGE;GHa;mBIE;GJkB;iBKE;GLI;qBME;GNI;CDO;uBQE;CRM"},"hasCjsExports":false},"type":"js/module"}]}