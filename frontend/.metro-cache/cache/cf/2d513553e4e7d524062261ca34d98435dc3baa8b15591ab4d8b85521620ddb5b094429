{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":26,"index":175}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _react = require(_dependencyMap[1], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[2], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _axios = require(_dependencyMap[3], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _reactJsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  const API_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL;\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      checkAuth();\n    }, []);\n    const checkAuth = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('token');\n        if (storedToken) {\n          setToken(storedToken);\n          const response = await axios.default.get(`${API_URL}/api/auth/me`, {\n            headers: {\n              Authorization: `Bearer ${storedToken}`\n            }\n          });\n          setUser(response.data);\n        }\n      } catch (error) {\n        console.error('Auth check failed:', error);\n        await AsyncStorage.default.removeItem('token');\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      try {\n        const response = await axios.default.post(`${API_URL}/api/auth/login`, {\n          email,\n          password\n        });\n        const {\n          token: newToken,\n          user: userData\n        } = response.data;\n        setToken(newToken);\n        setUser(userData);\n        await AsyncStorage.default.setItem('token', newToken);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    };\n    const register = async (username, email, password) => {\n      try {\n        console.log('AuthContext: Sending registration request...');\n        const response = await axios.default.post(`${API_URL}/api/auth/register`, {\n          username,\n          email,\n          password\n        });\n        console.log('AuthContext: Registration response received:', response.data);\n        const {\n          token: newToken,\n          user: userData\n        } = response.data;\n        setToken(newToken);\n        setUser(userData);\n        await AsyncStorage.default.setItem('token', newToken);\n        console.log('AuthContext: Token saved, user set:', userData);\n      } catch (error) {\n        console.error('AuthContext: Registration error:', error.response?.data || error.message);\n        throw new Error(error.response?.data?.detail || 'Registration failed');\n      }\n    };\n    const logout = async () => {\n      setUser(null);\n      setToken(null);\n      await AsyncStorage.default.removeItem('token');\n    };\n    const updateUser = userData => {\n      if (user) {\n        setUser(Object.assign({}, user, userData));\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        login,\n        register,\n        logout,\n        updateUser,\n        loading\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 5\n    }, this);\n  };\n  _s(AuthProvider, \"uAkFQMmIUxfxJcQTEb8tCM/KFt4=\");\n  _c = AuthProvider;\n  const useAuth = () => {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n  };\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":144,"map":[[15,2,28,0,"Object"],[15,8,28,0],[15,9,28,0,"defineProperty"],[15,23,28,0],[15,24,28,0,"exports"],[15,31,28,0],[16,4,28,0,"enumerable"],[16,14,28,0],[17,4,28,0,"get"],[17,7,28,0],[17,18,28,0,"get"],[17,19,28,0],[18,6,28,0],[18,13,28,0,"AuthProvider"],[18,25,28,0],[19,4,28,0],[20,2,28,0],[21,2,109,0,"Object"],[21,8,109,0],[21,9,109,0,"defineProperty"],[21,23,109,0],[21,24,109,0,"exports"],[21,31,109,0],[22,4,109,0,"enumerable"],[22,14,109,0],[23,4,109,0,"get"],[23,7,109,0],[23,18,109,0,"get"],[23,19,109,0],[24,6,109,0],[24,13,109,0,"useAuth"],[24,20,109,0],[25,4,109,0],[26,2,109,0],[27,2,115,2],[27,6,115,2,"_expoVirtualEnv"],[27,21,115,2],[27,24,115,2,"require"],[27,31,115,2],[27,32,115,2,"_dependencyMap"],[27,46,115,2],[28,2,1,0],[28,6,1,0,"_react"],[28,12,1,0],[28,15,1,0,"require"],[28,22,1,0],[28,23,1,0,"_dependencyMap"],[28,37,1,0],[29,2,2,0],[29,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[29,42,2,0],[29,45,2,0,"require"],[29,52,2,0],[29,53,2,0,"_dependencyMap"],[29,67,2,0],[30,2,2,0],[30,6,2,0,"AsyncStorage"],[30,18,2,0],[30,21,2,0,"_interopDefault"],[30,36,2,0],[30,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[30,73,2,0],[31,2,3,0],[31,6,3,0,"_axios"],[31,12,3,0],[31,15,3,0,"require"],[31,22,3,0],[31,23,3,0,"_dependencyMap"],[31,37,3,0],[32,2,3,0],[32,6,3,0,"axios"],[32,11,3,0],[32,14,3,0,"_interopDefault"],[32,29,3,0],[32,30,3,0,"_axios"],[32,36,3,0],[33,2,3,26],[33,6,3,26,"_reactJsxDevRuntime"],[33,25,3,26],[33,28,3,26,"require"],[33,35,3,26],[33,36,3,26,"_dependencyMap"],[33,50,3,26],[34,2,5,0],[34,8,5,6,"API_URL"],[34,15,5,13],[34,18,5,13,"_expoVirtualEnv"],[34,33,5,13],[34,34,5,13,"env"],[34,37,5,13],[34,38,5,13,"EXPO_PUBLIC_BACKEND_URL"],[34,61,5,51],[35,2,26,0],[35,8,26,6,"AuthContext"],[35,19,26,17],[35,35,26,20],[35,39,26,20,"createContext"],[35,45,26,33],[35,46,26,33,"createContext"],[35,59,26,33],[35,61,26,63,"undefined"],[35,70,26,72],[35,71,26,73],[36,2,28,7],[36,8,28,13,"AuthProvider"],[36,20,28,66],[36,23,28,69,"AuthProvider"],[36,24,28,70],[37,4,28,72,"children"],[38,2,28,81],[38,3,28,82],[38,8,28,87],[39,4,28,87,"_s"],[39,6,28,87],[40,4,29,2],[40,10,29,8],[40,11,29,9,"user"],[40,15,29,13],[40,17,29,15,"setUser"],[40,24,29,22],[40,25,29,23],[40,28,29,26],[40,32,29,26,"useState"],[40,38,29,34],[40,39,29,34,"useState"],[40,47,29,34],[40,49,29,48],[40,53,29,52],[40,54,29,53],[41,4,30,2],[41,10,30,8],[41,11,30,9,"token"],[41,16,30,14],[41,18,30,16,"setToken"],[41,26,30,24],[41,27,30,25],[41,30,30,28],[41,34,30,28,"useState"],[41,40,30,36],[41,41,30,36,"useState"],[41,49,30,36],[41,51,30,52],[41,55,30,56],[41,56,30,57],[42,4,31,2],[42,10,31,8],[42,11,31,9,"loading"],[42,18,31,16],[42,20,31,18,"setLoading"],[42,30,31,28],[42,31,31,29],[42,34,31,32],[42,38,31,32,"useState"],[42,44,31,40],[42,45,31,40,"useState"],[42,53,31,40],[42,55,31,41],[42,59,31,45],[42,60,31,46],[43,4,33,2],[43,8,33,2,"useEffect"],[43,14,33,11],[43,15,33,11,"useEffect"],[43,24,33,11],[43,26,33,12],[43,32,33,18],[44,6,34,4,"checkAuth"],[44,15,34,13],[44,16,34,14],[44,17,34,15],[45,4,35,2],[45,5,35,3],[45,7,35,5],[45,9,35,7],[45,10,35,8],[46,4,37,2],[46,10,37,8,"checkAuth"],[46,19,37,17],[46,22,37,20],[46,28,37,20,"checkAuth"],[46,29,37,20],[46,34,37,32],[47,6,38,4],[47,10,38,8],[48,8,39,6],[48,14,39,12,"storedToken"],[48,25,39,23],[48,28,39,26],[48,34,39,32,"AsyncStorage"],[48,46,39,44],[48,47,39,44,"default"],[48,54,39,44],[48,55,39,45,"getItem"],[48,62,39,52],[48,63,39,53],[48,70,39,60],[48,71,39,61],[49,8,40,6],[49,12,40,10,"storedToken"],[49,23,40,21],[49,25,40,23],[50,10,41,8,"setToken"],[50,18,41,16],[50,19,41,17,"storedToken"],[50,30,41,28],[50,31,41,29],[51,10,42,8],[51,16,42,14,"response"],[51,24,42,22],[51,27,42,25],[51,33,42,31,"axios"],[51,38,42,36],[51,39,42,36,"default"],[51,46,42,36],[51,47,42,37,"get"],[51,50,42,40],[51,51,42,41],[51,54,42,44,"API_URL"],[51,61,42,51],[51,75,42,65],[51,77,42,67],[52,12,43,10,"headers"],[52,19,43,17],[52,21,43,19],[53,14,43,21,"Authorization"],[53,27,43,34],[53,29,43,36],[53,39,43,46,"storedToken"],[53,50,43,57],[54,12,43,60],[55,10,44,8],[55,11,44,9],[55,12,44,10],[56,10,45,8,"setUser"],[56,17,45,15],[56,18,45,16,"response"],[56,26,45,24],[56,27,45,25,"data"],[56,31,45,29],[56,32,45,30],[57,8,46,6],[58,6,47,4],[58,7,47,5],[58,8,47,6],[58,15,47,13,"error"],[58,20,47,18],[58,22,47,20],[59,8,48,6,"console"],[59,15,48,13],[59,16,48,14,"error"],[59,21,48,19],[59,22,48,20],[59,42,48,40],[59,44,48,42,"error"],[59,49,48,47],[59,50,48,48],[60,8,49,6],[60,14,49,12,"AsyncStorage"],[60,26,49,24],[60,27,49,24,"default"],[60,34,49,24],[60,35,49,25,"removeItem"],[60,45,49,35],[60,46,49,36],[60,53,49,43],[60,54,49,44],[61,6,50,4],[61,7,50,5],[61,16,50,14],[62,8,51,6,"setLoading"],[62,18,51,16],[62,19,51,17],[62,24,51,22],[62,25,51,23],[63,6,52,4],[64,4,53,2],[64,5,53,3],[65,4,55,2],[65,10,55,8,"login"],[65,15,55,13],[65,18,55,16],[65,24,55,16,"login"],[65,25,55,23,"email"],[65,30,55,36],[65,32,55,38,"password"],[65,40,55,54],[65,45,55,59],[66,6,56,4],[66,10,56,8],[67,8,57,6],[67,14,57,12,"response"],[67,22,57,20],[67,25,57,23],[67,31,57,29,"axios"],[67,36,57,34],[67,37,57,34,"default"],[67,44,57,34],[67,45,57,35,"post"],[67,49,57,39],[67,50,57,40],[67,53,57,43,"API_URL"],[67,60,57,50],[67,77,57,67],[67,79,57,69],[68,10,58,8,"email"],[68,15,58,13],[69,10,59,8,"password"],[70,8,60,6],[70,9,60,7],[70,10,60,8],[71,8,61,6],[71,14,61,12],[72,10,61,14,"token"],[72,15,61,19],[72,17,61,21,"newToken"],[72,25,61,29],[73,10,61,31,"user"],[73,14,61,35],[73,16,61,37,"userData"],[74,8,61,46],[74,9,61,47],[74,12,61,50,"response"],[74,20,61,58],[74,21,61,59,"data"],[74,25,61,63],[75,8,62,6,"setToken"],[75,16,62,14],[75,17,62,15,"newToken"],[75,25,62,23],[75,26,62,24],[76,8,63,6,"setUser"],[76,15,63,13],[76,16,63,14,"userData"],[76,24,63,22],[76,25,63,23],[77,8,64,6],[77,14,64,12,"AsyncStorage"],[77,26,64,24],[77,27,64,24,"default"],[77,34,64,24],[77,35,64,25,"setItem"],[77,42,64,32],[77,43,64,33],[77,50,64,40],[77,52,64,42,"newToken"],[77,60,64,50],[77,61,64,51],[78,6,65,4],[78,7,65,5],[78,8,65,6],[78,15,65,13,"error"],[78,20,65,23],[78,22,65,25],[79,8,66,6],[79,14,66,12],[79,18,66,16,"Error"],[79,23,66,21],[79,24,66,22,"error"],[79,29,66,27],[79,30,66,28,"response"],[79,38,66,36],[79,40,66,38,"data"],[79,44,66,42],[79,46,66,44,"detail"],[79,52,66,50],[79,56,66,54],[79,70,66,68],[79,71,66,69],[80,6,67,4],[81,4,68,2],[81,5,68,3],[82,4,70,2],[82,10,70,8,"register"],[82,18,70,16],[82,21,70,19],[82,27,70,19,"register"],[82,28,70,26,"username"],[82,36,70,42],[82,38,70,44,"email"],[82,43,70,57],[82,45,70,59,"password"],[82,53,70,75],[82,58,70,80],[83,6,71,4],[83,10,71,8],[84,8,72,6,"console"],[84,15,72,13],[84,16,72,14,"log"],[84,19,72,17],[84,20,72,18],[84,66,72,64],[84,67,72,65],[85,8,73,6],[85,14,73,12,"response"],[85,22,73,20],[85,25,73,23],[85,31,73,29,"axios"],[85,36,73,34],[85,37,73,34,"default"],[85,44,73,34],[85,45,73,35,"post"],[85,49,73,39],[85,50,73,40],[85,53,73,43,"API_URL"],[85,60,73,50],[85,80,73,70],[85,82,73,72],[86,10,74,8,"username"],[86,18,74,16],[87,10,75,8,"email"],[87,15,75,13],[88,10,76,8,"password"],[89,8,77,6],[89,9,77,7],[89,10,77,8],[90,8,78,6,"console"],[90,15,78,13],[90,16,78,14,"log"],[90,19,78,17],[90,20,78,18],[90,66,78,64],[90,68,78,66,"response"],[90,76,78,74],[90,77,78,75,"data"],[90,81,78,79],[90,82,78,80],[91,8,79,6],[91,14,79,12],[92,10,79,14,"token"],[92,15,79,19],[92,17,79,21,"newToken"],[92,25,79,29],[93,10,79,31,"user"],[93,14,79,35],[93,16,79,37,"userData"],[94,8,79,46],[94,9,79,47],[94,12,79,50,"response"],[94,20,79,58],[94,21,79,59,"data"],[94,25,79,63],[95,8,80,6,"setToken"],[95,16,80,14],[95,17,80,15,"newToken"],[95,25,80,23],[95,26,80,24],[96,8,81,6,"setUser"],[96,15,81,13],[96,16,81,14,"userData"],[96,24,81,22],[96,25,81,23],[97,8,82,6],[97,14,82,12,"AsyncStorage"],[97,26,82,24],[97,27,82,24,"default"],[97,34,82,24],[97,35,82,25,"setItem"],[97,42,82,32],[97,43,82,33],[97,50,82,40],[97,52,82,42,"newToken"],[97,60,82,50],[97,61,82,51],[98,8,83,6,"console"],[98,15,83,13],[98,16,83,14,"log"],[98,19,83,17],[98,20,83,18],[98,57,83,55],[98,59,83,57,"userData"],[98,67,83,65],[98,68,83,66],[99,6,84,4],[99,7,84,5],[99,8,84,6],[99,15,84,13,"error"],[99,20,84,23],[99,22,84,25],[100,8,85,6,"console"],[100,15,85,13],[100,16,85,14,"error"],[100,21,85,19],[100,22,85,20],[100,56,85,54],[100,58,85,56,"error"],[100,63,85,61],[100,64,85,62,"response"],[100,72,85,70],[100,74,85,72,"data"],[100,78,85,76],[100,82,85,80,"error"],[100,87,85,85],[100,88,85,86,"message"],[100,95,85,93],[100,96,85,94],[101,8,86,6],[101,14,86,12],[101,18,86,16,"Error"],[101,23,86,21],[101,24,86,22,"error"],[101,29,86,27],[101,30,86,28,"response"],[101,38,86,36],[101,40,86,38,"data"],[101,44,86,42],[101,46,86,44,"detail"],[101,52,86,50],[101,56,86,54],[101,77,86,75],[101,78,86,76],[102,6,87,4],[103,4,88,2],[103,5,88,3],[104,4,90,2],[104,10,90,8,"logout"],[104,16,90,14],[104,19,90,17],[104,25,90,17,"logout"],[104,26,90,17],[104,31,90,29],[105,6,91,4,"setUser"],[105,13,91,11],[105,14,91,12],[105,18,91,16],[105,19,91,17],[106,6,92,4,"setToken"],[106,14,92,12],[106,15,92,13],[106,19,92,17],[106,20,92,18],[107,6,93,4],[107,12,93,10,"AsyncStorage"],[107,24,93,22],[107,25,93,22,"default"],[107,32,93,22],[107,33,93,23,"removeItem"],[107,43,93,33],[107,44,93,34],[107,51,93,41],[107,52,93,42],[108,4,94,2],[108,5,94,3],[109,4,96,2],[109,10,96,8,"updateUser"],[109,20,96,18],[109,23,96,22,"userData"],[109,31,96,45],[109,35,96,50],[110,6,97,4],[110,10,97,8,"user"],[110,14,97,12],[110,16,97,14],[111,8,98,6,"setUser"],[111,15,98,13],[111,16,98,13,"Object"],[111,22,98,13],[111,23,98,13,"assign"],[111,29,98,13],[111,34,98,19,"user"],[111,38,98,23],[111,40,98,28,"userData"],[111,48,98,36],[111,49,98,38],[111,50,98,39],[112,6,99,4],[113,4,100,2],[113,5,100,3],[114,4,102,2],[114,24,103,4],[114,28,103,4,"_reactJsxDevRuntime"],[114,47,103,4],[114,48,103,4,"jsxDEV"],[114,54,103,4],[114,56,103,5,"AuthContext"],[114,67,103,16],[114,68,103,17,"Provider"],[114,76,103,25],[115,6,103,26,"value"],[115,11,103,31],[115,13,103,33],[116,8,103,35,"user"],[116,12,103,39],[117,8,103,41,"token"],[117,13,103,46],[118,8,103,48,"login"],[118,13,103,53],[119,8,103,55,"register"],[119,16,103,63],[120,8,103,65,"logout"],[120,14,103,71],[121,8,103,73,"updateUser"],[121,18,103,83],[122,8,103,85,"loading"],[123,6,103,93],[123,7,103,95],[124,6,103,95,"children"],[124,14,103,95],[124,16,104,7,"children"],[125,4,104,15],[126,6,104,15,"fileName"],[126,14,104,15],[126,16,104,15,"_jsxFileName"],[126,28,104,15],[127,6,104,15,"lineNumber"],[127,16,104,15],[128,6,104,15,"columnNumber"],[128,18,104,15],[129,4,104,15],[129,11,105,26],[129,12,105,27],[130,2,107,0],[130,3,107,1],[131,2,107,2,"_s"],[131,4,107,2],[131,5,28,13,"AuthProvider"],[131,17,28,66],[132,2,28,66,"_c"],[132,4,28,66],[132,7,28,13,"AuthProvider"],[132,19,28,66],[133,2,109,7],[133,8,109,13,"useAuth"],[133,15,109,20],[133,18,109,23,"useAuth"],[133,19,109,23],[133,24,109,29],[134,4,109,29,"_s2"],[134,7,109,29],[135,4,110,2],[135,10,110,8,"context"],[135,17,110,15],[135,20,110,18],[135,24,110,18,"useContext"],[135,30,110,28],[135,31,110,28,"useContext"],[135,41,110,28],[135,43,110,29,"AuthContext"],[135,54,110,40],[135,55,110,41],[136,4,111,2],[136,8,111,6],[136,9,111,7,"context"],[136,16,111,14],[136,18,111,16],[137,6,112,4],[137,12,112,10],[137,16,112,14,"Error"],[137,21,112,19],[137,22,112,20],[137,64,112,62],[137,65,112,63],[138,4,113,2],[139,4,114,2],[139,11,114,9,"context"],[139,18,114,16],[140,2,115,0],[140,3,115,1],[141,2,115,2,"_s2"],[141,5,115,2],[141,6,109,13,"useAuth"],[141,13,109,20],[142,2,109,20],[142,6,109,20,"_c"],[142,8,109,20],[143,2,109,20,"$RefreshReg$"],[143,14,109,20],[143,15,109,20,"_c"],[143,17,109,20],[144,0,109,20],[144,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","checkAuth","login","register","logout","updateUser","useAuth"],"mappings":"AAA;qEC2B;YCK;GDE;oBEE;GFgB;gBGE;GHa;mBIE;GJkB;iBKE;GLI;qBME;GNI;CDO;uBQE;CRM"},"hasCjsExports":false},"type":"js/module"}]}